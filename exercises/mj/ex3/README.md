# Barnes-Hut with MPI parallelization
In this work I have tried to modify the program in the exercise 2 in order to make it works with MPI parallelization. I used the same modules as in exercise 2 with the necesary modifications and I will explain too how the main program works:
- Geometry: This module contains the mathematical operations needed. I used the same module as before except that I include a new operator to convert points in vectors and vectors in point. I did it because I had a problem with it when I tried to compile the Barnes-Hut module.
- Particle: This module is the one I have changed the most in order to make it work with MPI parallelization. I define again the particle in 3D and the vector in 3D using arrays of displacements, types and blocklengths. This will make me allow to have operations such as send and scatter in the main program using the MPI.
- BH: This is the Barnes-Hut module. I tried not to change anything here but I had some problems when I tried to compile it, so I fixed it.
- CI: It generates randomly the initial conditions in the IC.txt
- Ex3: This is the main program. I used a  MPI parallelization in order to make it faster. With Call Mpi_init(ierr) I initialize the MPI entorn and with rank I indicate the actual process and with size the total number of process. In rank == 0 I put my parameters for the Barnes-Hut, which are dt, dt_out, t_end, n and I tried to add theta. This values are transmitted to all the proceses with mpi_bcast. Every process will work with n/size particles. The main process read the initial conditions in IC.txt and distribute this data to the other process with mpi_scatter. Then we have the main loop in which the velocity and the position of the particles are updating and the forces are computed with the Barnes-Hut module. After that we have the output of the results, with it corresponding time of execution and to finish the main program I close the MPI entorn with Call Mpi_finalize(ierr). 
